from cvereporter import fetch_vulnerabilities
from datetime import date, timedelta
import json
import cvereporter.fetch_vulnerabilities

start_date = date(2019, 1, 1)
end_date = date(2024, 2, 4)
current_date = start_date
responses = []
while current_date < end_date:

    date_str = current_date.strftime("%Y-%m-%d")
    print(date_str)
    resp = fetch_vulnerabilities.fetch_dicts(date_str)
    print(resp, flush=True)
    current_date += timedelta(days=1)
    if resp is not None:
          responses.append(resp)

with open("data/openjvg_summary.json", "w") as dump:
        dump.write(json.dumps({"data":responses}, indent = True))